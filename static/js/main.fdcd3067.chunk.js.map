{"version":3,"sources":["contexts.js","utils.js","components/Header/Header.js","WebAPI.js","pages/HomePage/HomePage.js","pages/RegisterPage/RegisterPage.js","pages/LoginPage/LoginPage.js","pages/PostPage/PostPage.js","pages/NewPostPage/NewPostPage.js","pages/AboutPage/AboutPage.js","components/App/App.js","index.js"],"names":["AuthContext","createContext","TOKEN_NAME","setAuthToken","token","localStorage","setItem","getAuthToken","getItem","HeaderContainer","styled","div","Brand","h1","NavLeftContainer","NavbarList","Nav","Link","props","$active","Header","pathname","useLocation","useContext","user","setUser","isGettingUser","history","useHistory","to","username","onClick","push","BASE_URL","getMe","fetch","headers","authorization","then","res","json","catch","err","console","log","Root","PostContainer","PostTitle","PostDate","PageControllerContainer","PageController","PageControllerFirst","PageControllerPrevious","PageControllerNext","PageControllerLast","CurrentPage","Loading","Post","post","id","title","Date","createdAt","toLocaleString","HomePage","useState","posts","setPosts","offset","setOffset","currentPage","setCurrentPage","isGettingPosts","setIsGettingPosts","totalPageCount","Math","ceil","length","useEffect","filter","index","map","RegisterForm","form","RegisterInputContainer","ErrorMessage","SubmitButton","button","RegisterPage","setUsername","nickname","setNickname","password","setPassword","errorMessage","setErrorMessage","onSubmit","e","preventDefault","method","body","JSON","stringify","register","data","ok","message","response","toString","type","name","value","onChange","target","LoginForm","LoginInputContainer","LoginPage","login","PostHeader","PostInfoContainer","PostAuthor","PostTime","PostContent","PostPage","setPost","author","setAuthor","useParams","getPost","NewPostContainer","PageTitle","InputTitle","NewPostForm","NewPostTitle","input","NewPostContent","textarea","NewPostSubmitButtonContainer","NewPostSubmitButton","NewPostPage","setTitle","content","setContent","addPost","AboutContainer","AboutHeader","AboutTitle","AboutContent","AboutPage","App","setIsGettingUser","Provider","exact","path","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.fdcd3067.chunk.js","sourcesContent":["/* eslint-disable import/prefer-default-export */\r\n/* eslint-disable import/no-unresolved */\r\nimport { createContext } from 'react';\r\n\r\n// 1. 利用 createContext 新增 AuthContext\r\nexport const AuthContext = createContext(null);\r\n","const TOKEN_NAME = 'token';\r\n\r\nexport const setAuthToken = (token) => {\r\n  localStorage.setItem(TOKEN_NAME, token);\r\n};\r\n\r\nexport const getAuthToken = () => localStorage.getItem(TOKEN_NAME);\r\n","/* eslint-disable react/react-in-jsx-scope */\r\n/* eslint-disable react/jsx-filename-extension */\r\n/* eslint-disable quotes */\r\n/* eslint-disable semi */\r\n/* eslint-disable import/no-unresolved */\r\nimport { useContext } from 'react'\r\nimport styled from 'styled-components'\r\nimport { Link, useLocation, useHistory } from \"react-router-dom\";\r\nimport { AuthContext } from '../../contexts'\r\nimport { setAuthToken } from '../../utils'\r\n\r\nconst HeaderContainer = styled.div`\r\n  height: 64px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  position: fixed;\r\n  top: 0px;\r\n  left: 0px;\r\n  right: 0px;\r\n  border-bottom: 1px solid rgba(0, 0, 0, 0.3);\r\n  box-sizing: border-box;\r\n  padding: 0 32px;\r\n\r\n  color: #555;\r\n  background-color: white;\r\n\r\n  /* color: white; */\r\n  /* background-color: #000035;  */\r\n  line-height: 64px;\r\n\r\n  & * {\r\n    color: #555;\r\n    /* border: solid 1px rgba(0, 0, 0, 0.3) */\r\n  }\r\n`\r\n\r\nconst Brand = styled.h1`\r\n  margin: 0 20px 0 0;\r\n`\r\nconst NavLeftContainer = styled.div`\r\n  display: flex;\r\n  height: 100%;\r\n`\r\nconst NavbarList = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n`\r\nconst Nav = styled(Link)`\r\n  padding: 0 10px;\r\n  width: 100px;\r\n  text-align: center;\r\n  text-decoration: none;\r\n  cursor: pointer;\r\n\r\n  /* &:hover {\r\n    background-color: #9999aa\r\n  } */\r\n\r\n  ${props => props.$active && `background: rgba(0, 0, 0, 0.1)`}\r\n`\r\n\r\nfunction Header() {\r\n  const location = useLocation()\r\n  const { pathname } = location\r\n\r\n  // get user\r\n  const { user, setUser, isGettingUser } = useContext(AuthContext)\r\n  const history = useHistory();\r\n\r\n  // 8. handleLogout => 1. token 設為 '', 2. 透過 useHistory 導回首頁\r\n  function handleLogout() {\r\n    setAuthToken('');\r\n    // 9. 由於登入會導回首頁，造成不能 push 首頁, 但不影響功能\r\n    history.push('/');\r\n\r\n    // 10. user => null\r\n    setUser(null);\r\n  }\r\n\r\n  return (\r\n    <HeaderContainer>\r\n      <NavLeftContainer>\r\n        <Brand>部落格</Brand>\r\n        <NavbarList>\r\n          <Nav to=\"/\" $active={pathname === '/'}>首頁</Nav>\r\n          <Nav to=\"/about\" $active={pathname === '/about'}>關於</Nav>\r\n          {!isGettingUser && user && <Nav to=\"/new-post\" $active={pathname === '/new-post'}>發布文章</Nav>}\r\n        </NavbarList>\r\n      </NavLeftContainer>\r\n\r\n      <NavbarList>\r\n        {!isGettingUser && user && <div>{user.username}</div>}\r\n        {!isGettingUser && user && <Nav to=\"/\" onClick={handleLogout}>登出</Nav>}\r\n        {!isGettingUser && !user && <Nav to=\"/login\" $active={pathname === '/login'}>登入</Nav>\r\n        }\r\n        {!isGettingUser && !user && <Nav to=\"/register\" $active={pathname === '/register'}>註冊</Nav>\r\n        }\r\n      </NavbarList>\r\n\r\n    </HeaderContainer>\r\n  );\r\n}\r\n\r\n\r\nexport default Header;\r\n","import { getAuthToken } from './utils';\r\n\r\nconst BASE_URL = 'https://student-json-api.lidemy.me';\r\n\r\nexport function register({ username, nickname, password }) {\r\n  return fetch(`${BASE_URL}/register`, {\r\n    method: 'POST',\r\n    headers: {\r\n      'content-type': 'application/json',\r\n    },\r\n    body: JSON.stringify({\r\n      nickname,\r\n      username,\r\n      password,\r\n    }),\r\n  })\r\n    .then(res => res.json());\r\n}\r\n\r\nexport function getPosts() {\r\n  // 一次只拿 5 筆\r\n  // _start=0&_end=5 => 會取到結果中 index=5-8 的 post\r\n  // 但是為了拿到全部 post 的數量，所以採用發一次 API，之後控制顯示的 5 筆\r\n  return fetch(`${BASE_URL}/posts?_sort=createdAt&_order=desc`)\r\n    .then(res => res.json());\r\n}\r\n\r\nexport function getPost(id) {\r\n  return fetch(`${BASE_URL}/posts/${id}/?_expand=user`)\r\n    .then(res => res.json());\r\n}\r\n\r\nexport function login(username, password) {\r\n  return fetch(`${BASE_URL}/login`, {\r\n    method: 'POST',\r\n    headers: {\r\n      'content-type': 'application/json',\r\n    },\r\n    body: JSON.stringify({\r\n      username,\r\n      password,\r\n    }),\r\n  })\r\n    .then(res => res.json());\r\n}\r\n\r\nexport function getMe() {\r\n  const token = getAuthToken();\r\n  if (token) {\r\n    return fetch(`${BASE_URL}/me`, {\r\n      headers: {\r\n        // get token from localStorage\r\n        authorization: `Bearer ${token}`,\r\n      },\r\n    })\r\n      .then(res => res.json())\r\n      .catch(err => { console.log(err) })\r\n  }\r\n}\r\n\r\nexport function addPost(title, body) {\r\n  const token = getAuthToken();\r\n  return fetch(`${BASE_URL}/posts`, {\r\n    method: 'POST',\r\n    headers: {\r\n      authorization: `Bearer ${token}`,\r\n      'content-type': 'application/json',\r\n    },\r\n    body: JSON.stringify({\r\n      title,\r\n      body,\r\n    }),\r\n  })\r\n    .then(res => res.json());\r\n}\r\n\r\nexport function deletePost(id) {\r\n  const token = getAuthToken();\r\n  return fetch(`${BASE_URL}/posts/${id}`, {\r\n    method: 'DELETE',\r\n    headers: {\r\n      authorization: `Bearer ${token}`,\r\n      'content-type': 'application/json',\r\n    },\r\n  })\r\n    .then(res => res.json());\r\n}\r\n","/* eslint-disable no-shadow */\r\n/* eslint-disable react/forbid-prop-types */\r\n/* eslint-disable react/require-default-props */\r\n/* eslint-disable import/no-extraneous-dependencies */\r\n/* eslint-disable react/react-in-jsx-scope */\r\n/* eslint-disable react/jsx-filename-extension */\r\n/* eslint-disable quotes */\r\n/* eslint-disable semi */\r\n/* eslint-disable import/no-unresolved */\r\nimport { useEffect, useState } from 'react'\r\nimport styled from 'styled-components'\r\nimport PropTypes from 'prop-types';\r\nimport { Link } from \"react-router-dom\";\r\nimport { getPosts } from '../../WebAPI'\r\n\r\nconst Root = styled.div``\r\nconst PostContainer = styled.div`\r\n  margin: 0 auto;\r\n  padding: 16px;\r\n  width: 600px;\r\n  display: flex;\r\n  align-items: flex-end;\r\n  justify-content: space-between;\r\n  border-bottom: solid 1px rgba(0, 0, 0, 0.2);\r\n`\r\nconst PostTitle = styled(Link)`\r\n  font-size: 20px;\r\n  max-width: 360px;\r\n  overflow: hidden;\r\n  cursor: pointer;\r\n  color: #555;\r\n  text-decoration: none;\r\n  word-break: break-word;\r\n`\r\nconst PostDate = styled.div`\r\n  font-size: 16px;\r\n  color: rgba(0, 0, 0, 0.6);\r\n`\r\n\r\nconst PageControllerContainer = styled.div`\r\n  margin-top: 20px;\r\n  display: flex;\r\n  justify-content: center;\r\n  & * {\r\n    margin: 0 10px;\r\n  }\r\n`\r\nconst PageController = styled.div`\r\n  width: 50px;\r\n  height: 30px;\r\n  color: #555;;\r\n  cursor: pointer;\r\n  text-align: center;\r\n  line-height: 30px;\r\n  border: solid 1px #555;\r\n`\r\n\r\nconst PageControllerFirst = styled(PageController)``\r\nconst PageControllerPrevious = styled(PageController)``\r\nconst PageControllerNext = styled(PageController)``\r\nconst PageControllerLast = styled(PageController)``\r\nconst CurrentPage = styled(PageController)`\r\n  border: none;\r\n`\r\n\r\nconst Loading = styled.div`\r\n  position: fixed;\r\n  top: 0;\r\n  bottom: 0;\r\n  right: 0;\r\n  left: 0;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  color: white;\r\n  font-size: 48px;\r\n  background: rgba(0, 0, 0, 0.5);\r\n`\r\n\r\nfunction Post({ post }) {\r\n  return (\r\n    <PostContainer>\r\n      <PostTitle to={`/posts/${post.id}`}>{post.title}</PostTitle>\r\n      <PostDate>{new Date(post.createdAt).toLocaleString()}</PostDate>\r\n      {/* <PostContent>{post.content}</PostContent> */}\r\n    </PostContainer>\r\n  )\r\n}\r\n\r\nPost.propTypes = {\r\n  post: PropTypes.object,\r\n}\r\n\r\nfunction HomePage() {\r\n  const [posts, setPosts] = useState([])\r\n  const [offset, setOffset] = useState(0)\r\n  const [currentPage, setCurrentPage] = useState(1)\r\n  const [isGettingPosts, setIsGettingPosts] = useState(true)\r\n\r\n  const totalPageCount = Math.ceil(posts.length / 5)\r\n\r\n  useEffect(() => {\r\n    getPosts().then((posts) => {\r\n      setPosts(posts)\r\n      setIsGettingPosts(false)\r\n    })\r\n  }, [])\r\n\r\n  return (\r\n    <Root>\r\n      {isGettingPosts && <Loading>Loading...</Loading>}\r\n      { !isGettingPosts\r\n        && posts\r\n          .filter((post, index) => index >= offset && index < (offset + 5))\r\n          .map(post => <Post post={post} key={post.id} />)\r\n      }\r\n      {!isGettingPosts\r\n        && (\r\n        <PageControllerContainer>\r\n          <PageControllerFirst onClick={() => {\r\n            setOffset(0)\r\n            setCurrentPage(1)\r\n          }}\r\n          >\r\n            {\"<<\"}\r\n          </PageControllerFirst>\r\n          <PageControllerPrevious onClick={() => {\r\n            if (currentPage <= 1) return\r\n            setOffset(offset - 5)\r\n            setCurrentPage(currentPage - 1)\r\n          }}\r\n          >\r\n            {\"<\"}\r\n          </PageControllerPrevious>\r\n\r\n          <CurrentPage>{`${currentPage} / ${totalPageCount}`}</CurrentPage>\r\n\r\n          <PageControllerNext onClick={() => {\r\n            if (currentPage >= totalPageCount) return\r\n            setOffset(offset + 5)\r\n            setCurrentPage(currentPage + 1)\r\n          }}\r\n          >\r\n            {\">\"}\r\n          </PageControllerNext>\r\n          <PageControllerLast onClick={() => {\r\n            setOffset((totalPageCount - 1) * 5)\r\n            setCurrentPage(totalPageCount)\r\n          }}\r\n          >\r\n            {\">>\"}\r\n          </PageControllerLast>\r\n        </PageControllerContainer>\r\n        )\r\n      }\r\n    </Root>\r\n  );\r\n}\r\n\r\nexport default HomePage;\r\n","/* eslint-disable consistent-return */\r\n/* eslint-disable react/react-in-jsx-scope */\r\n/* eslint-disable react/jsx-filename-extension */\r\n/* eslint-disable quotes */\r\n/* eslint-disable semi */\r\n/* eslint-disable import/no-unresolved */\r\nimport { useState, useContext } from 'react'\r\nimport styled from 'styled-components'\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { register, getMe } from '../../WebAPI'\r\nimport { setAuthToken } from '../../utils'\r\nimport { AuthContext } from '../../contexts';\r\n\r\nconst RegisterForm = styled.form`\r\n  width: 600px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  margin: 20px auto;\r\n  text-align: center;\r\n`\r\nconst RegisterInputContainer = styled.div`\r\n  & + & {\r\n    margin-top: 10px;\r\n  }\r\n`\r\n\r\nconst ErrorMessage = styled.div`\r\n  font-size: 16px;\r\n  color: red;\r\n`\r\n\r\nconst SubmitButton = styled.button`\r\n  margin-top: 20px;\r\n  padding: 5px 10px;\r\n  width: 60px;\r\n`\r\n\r\nfunction RegisterPage() {\r\n  const [username, setUsername] = useState('')\r\n  const [nickname, setNickname] = useState('')\r\n  const [password, setPassword] = useState('')\r\n\r\n  // show error message\r\n  const [errorMessage, setErrorMessage] = useState('')\r\n\r\n  // useHistory\r\n  const history = useHistory()\r\n\r\n  const { setUser } = useContext(AuthContext)\r\n\r\n  function handleRegisterSubmit(e) {\r\n    e.preventDefault()\r\n    register({\r\n      username,\r\n      nickname,\r\n      password,\r\n    }).then((data) => {\r\n      // Register fail\r\n      if (data.ok === 0) {\r\n        return setErrorMessage(data.message)\r\n      }\r\n\r\n      // Register success\r\n      setErrorMessage(null)\r\n      console.log(data);\r\n      const { token } = data;\r\n      // 把 token 寫入 localStorage\r\n      // 也可以另開 utils.js => setAuthToken, 再引入\r\n      // localStorage.setItem('token', token)\r\n      setAuthToken(token);\r\n\r\n      // 4. 存取 getMe API, 取得 user data => setUser(data)\r\n      getMe().then((response) => {\r\n        console.log(response);\r\n        if (response.ok !== 1) {\r\n          // Register fail => set token to null, show errorMessage\r\n          setAuthToken(null);\r\n          return setErrorMessage(response.toString());\r\n        }\r\n\r\n        setUser(response.data)\r\n\r\n        // redirect to home page\r\n        history.push('/')\r\n      })\r\n    })\r\n  }\r\n\r\n  return (\r\n    <RegisterForm onSubmit={handleRegisterSubmit}>\r\n      <h1>註冊</h1>\r\n      <RegisterInputContainer>\r\n        Username:\r\n        <input\r\n          type=\"text\"\r\n          name=\"username\"\r\n          value={username}\r\n          onChange={(e) => {\r\n            setUsername(e.target.value)\r\n          }}\r\n        />\r\n      </RegisterInputContainer>\r\n      <RegisterInputContainer>\r\n        Nickname:\r\n        <input\r\n          type=\"text\"\r\n          name=\"nickname\"\r\n          value={nickname}\r\n          onChange={(e) => {\r\n            setNickname(e.target.value)\r\n          }}\r\n        />\r\n      </RegisterInputContainer>\r\n      <RegisterInputContainer>\r\n        Password:\r\n        <input\r\n          type=\"password\"\r\n          name=\"password\"\r\n          value={password}\r\n          onChange={(e) => {\r\n            setPassword(e.target.value)\r\n          }}\r\n        />\r\n      </RegisterInputContainer>\r\n      {errorMessage && <ErrorMessage>{errorMessage}</ErrorMessage>}\r\n      <SubmitButton type=\"submit\">註冊</SubmitButton>\r\n    </RegisterForm>\r\n  );\r\n}\r\n\r\nexport default RegisterPage;\r\n","/* eslint-disable consistent-return */\r\n/* eslint-disable react/react-in-jsx-scope */\r\n/* eslint-disable react/jsx-filename-extension */\r\n/* eslint-disable quotes */\r\n/* eslint-disable semi */\r\n/* eslint-disable import/no-unresolved */\r\nimport { useState, useContext } from 'react'\r\nimport styled from 'styled-components'\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { login, getMe } from '../../WebAPI'\r\nimport { setAuthToken } from '../../utils'\r\nimport { AuthContext } from '../../contexts';\r\n\r\nconst LoginForm = styled.form`\r\n  width: 600px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  margin: 20px auto;\r\n  text-align: center;\r\n`\r\nconst LoginInputContainer = styled.div`\r\n  & + & {\r\n    margin-top: 10px;\r\n  }\r\n`\r\n\r\nconst ErrorMessage = styled.div`\r\n  font-size: 16px;\r\n  color: red;\r\n`\r\n\r\nconst SubmitButton = styled.button`\r\n  margin-top: 20px;\r\n  padding: 5px 10px;\r\n  width: 60px;\r\n`\r\n\r\nfunction LoginPage() {\r\n  const [username, setUsername] = useState('')\r\n  const [password, setPassword] = useState('')\r\n\r\n  // show error message\r\n  const [errorMessage, setErrorMessage] = useState('')\r\n\r\n  // useHistory\r\n  const history = useHistory()\r\n\r\n  const { setUser } = useContext(AuthContext)\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault()\r\n    login(username, password)\r\n      .then((data) => {\r\n        // login fail\r\n        if (data.ok === 0) {\r\n          return setErrorMessage(data.message)\r\n        }\r\n\r\n        // login success\r\n        setErrorMessage(null)\r\n        const { token } = data;\r\n        // 把 token 寫入 localStorage\r\n        // 也可以另開 utils.js => setAuthToken, 再引入\r\n        // localStorage.setItem('token', token)\r\n        setAuthToken(token);\r\n\r\n        // 4. 存取 getMe API, 取得 user data => setUser(data)\r\n        getMe().then((response) => {\r\n          console.log(response);\r\n          if (response.ok !== 1) {\r\n            // login fail => set token to null, show errorMessage\r\n            setAuthToken(null);\r\n            return setErrorMessage(response.toString());\r\n          }\r\n\r\n          setUser(response.data)\r\n\r\n          // redirect to home page\r\n          history.push('/')\r\n        })\r\n      })\r\n  }\r\n\r\n  return (\r\n    <LoginForm onSubmit={handleSubmit}>\r\n      <h1>登入</h1>\r\n      <LoginInputContainer>\r\n        Username:\r\n        <input\r\n          type=\"text\"\r\n          name=\"username\"\r\n          value={username}\r\n          onChange={(e) => {\r\n            setUsername(e.target.value)\r\n          }}\r\n        />\r\n      </LoginInputContainer>\r\n      <LoginInputContainer>\r\n        Password:\r\n        <input\r\n          type=\"password\"\r\n          name=\"password\"\r\n          value={password}\r\n          onChange={(e) => {\r\n            setPassword(e.target.value)\r\n          }}\r\n        />\r\n      </LoginInputContainer>\r\n      {errorMessage && <ErrorMessage>{errorMessage}</ErrorMessage>}\r\n      <SubmitButton type=\"submit\">登入</SubmitButton>\r\n    </LoginForm>\r\n  );\r\n}\r\n\r\nexport default LoginPage;\r\n","/* eslint-disable no-shadow */\r\n/* eslint-disable consistent-return */\r\n/* eslint-disable react/react-in-jsx-scope */\r\n/* eslint-disable react/jsx-filename-extension */\r\n/* eslint-disable quotes */\r\n/* eslint-disable semi */\r\n/* eslint-disable import/no-unresolved */\r\nimport { useState, useEffect } from 'react';\r\nimport styled from 'styled-components';\r\nimport { useParams } from \"react-router-dom\";\r\nimport { getPost } from '../../WebAPI'\r\n\r\nconst Root = styled.div``\r\nconst PostContainer = styled.div`\r\n  width: 600px;\r\n  margin: 20px auto 0 auto;\r\n  padding: 20px;\r\n  box-shadow: 0px 2px 10px 2px rgba(0, 0, 0, 0.1);\r\n`\r\nconst PostHeader = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: space-between;\r\n  border-bottom: 1px solid rgba(0, 0, 0, 0.2);\r\n  padding: 20px 0;\r\n`\r\n\r\nconst PostTitle = styled.div`\r\n  font-size: 36px;\r\n  color: #555;\r\n`\r\n\r\nconst PostInfoContainer = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n`\r\nconst PostAuthor = styled.div`\r\n  margin: 10px 10px 0 0;\r\n  font-size: 16px;\r\n  color: #aaa;\r\n`\r\n\r\nconst PostTime = styled(PostAuthor)``\r\nconst PostContent = styled.div`\r\n  padding: 20px 0;\r\n  color: #555;\r\n  word-break: break-word;\r\n`\r\n\r\nfunction PostPage() {\r\n  const [post, setPost] = useState({})\r\n  const [author, setAuthor] = useState(null)\r\n  const { id } = useParams();\r\n\r\n  useEffect(() => {\r\n    getPost(id).then((post) => {\r\n      setPost(post);\r\n      setAuthor(post.user.nickname);\r\n    })\r\n  }, [])\r\n\r\n  return (\r\n    <Root>\r\n      <PostContainer>\r\n        <PostHeader>\r\n          <PostTitle>{post.title}</PostTitle>\r\n          <PostInfoContainer>\r\n            {author && <PostAuthor>{`作者：${author}`}</PostAuthor>}\r\n            <PostTime>{post.createdAt && new Date(post.createdAt).toLocaleString()}</PostTime>\r\n          </PostInfoContainer>\r\n        </PostHeader>\r\n        <PostContent>{post.body}</PostContent>\r\n      </PostContainer>\r\n    </Root>\r\n  );\r\n}\r\n\r\nexport default PostPage;\r\n","/* eslint-disable consistent-return */\r\n/* eslint-disable react/react-in-jsx-scope */\r\n/* eslint-disable react/jsx-filename-extension */\r\n/* eslint-disable quotes */\r\n/* eslint-disable semi */\r\n/* eslint-disable import/no-unresolved */\r\nimport { useState } from 'react'\r\nimport styled from 'styled-components'\r\n\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nimport { addPost } from '../../WebAPI';\r\n\r\nconst Root = styled.div``\r\nconst NewPostContainer = styled.div`\r\n  width: 600px;\r\n  margin: 20px auto 0 auto;\r\n  padding: 20px;\r\n  box-shadow: 0px 2px 10px 2px rgba(0, 0, 0, 0.1);\r\n`\r\n\r\nconst PageTitle = styled.div`\r\n  padding: 20px 0;\r\n  font-size: 36px;\r\n  color: #333;\r\n  border-bottom: 1px solid rgba(0, 0, 0, 0.2);\r\n`\r\nconst InputTitle = styled.div`\r\n  margin-bottom: 5px;\r\n`\r\nconst NewPostForm = styled.form`\r\n  padding: 20px 0;\r\n`\r\n\r\nconst NewPostTitle = styled.input`\r\n  margin-bottom: 10px;\r\n  width: 100%;\r\n  box-sizing: border-box;\r\n`\r\n\r\nconst NewPostContent = styled.textarea`\r\n  margin-bottom: 10px;\r\n  width: 100%;\r\n  height: 400px;\r\n  box-sizing: border-box;\r\n  resize: vertical;\r\n`\r\n\r\nconst ErrorMessage = styled.div`\r\n  margin-bottom: 5px;\r\n  font-size: 16px;\r\n  color: red;\r\n`\r\n\r\nconst NewPostSubmitButtonContainer = styled.div`\r\n  text-align: right;\r\n`\r\nconst NewPostSubmitButton = styled.button``\r\n\r\nfunction NewPostPage() {\r\n  const [title, setTitle] = useState('')\r\n  const [content, setContent] = useState('')\r\n  const [errorMessage, setErrorMessage] = useState('')\r\n  const history = useHistory()\r\n\r\n  function handleTitleChange(e) {\r\n    setTitle(e.target.value);\r\n  }\r\n\r\n  function handleContentChange(e) {\r\n    setContent(e.target.value);\r\n  }\r\n\r\n  function handleNewPostSubmit(e) {\r\n    e.preventDefault();\r\n    console.log(title, content);\r\n    addPost(title, content).then((response) => {\r\n      console.log(response)\r\n      if (response.ok === 0) {\r\n        return setErrorMessage(response.message)\r\n      }\r\n      history.push('/')\r\n    })\r\n  }\r\n\r\n  return (\r\n    <Root>\r\n      <NewPostContainer>\r\n        <PageTitle>發布文章</PageTitle>\r\n        <NewPostForm onSubmit={handleNewPostSubmit}>\r\n          <InputTitle>文章標題：</InputTitle>\r\n          <NewPostTitle value={title} onChange={handleTitleChange} />\r\n          <InputTitle>文章內容：</InputTitle>\r\n          <NewPostContent value={content} onChange={handleContentChange} />\r\n          <NewPostSubmitButtonContainer>\r\n            {errorMessage && <ErrorMessage>{errorMessage}</ErrorMessage>}\r\n            <NewPostSubmitButton>發布</NewPostSubmitButton>\r\n          </NewPostSubmitButtonContainer>\r\n        </NewPostForm>\r\n      </NewPostContainer>\r\n    </Root>\r\n  );\r\n}\r\n\r\nexport default NewPostPage;\r\n","/* eslint-disable react/react-in-jsx-scope */\r\n/* eslint-disable react/jsx-filename-extension */\r\n/* eslint-disable quotes */\r\n/* eslint-disable semi */\r\n/* eslint-disable import/no-unresolved */\r\nimport styled from 'styled-components';\r\n\r\nconst Root = styled.div``\r\nconst AboutContainer = styled.div`\r\n  width: 600px;\r\n  margin: 20px auto 0 auto;\r\n  padding: 20px;\r\n  box-shadow: 0px 2px 10px 2px rgba(0, 0, 0, 0.1);\r\n`\r\nconst AboutHeader = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: space-between;\r\n  border-bottom: 1px solid rgba(0, 0, 0, 0.2);\r\n  padding: 20px 0;\r\n`\r\n\r\nconst AboutTitle = styled.div`\r\n  font-size: 36px;\r\n  color: #555;\r\n`\r\n\r\nconst AboutContent = styled.div`\r\n  padding: 20px 0;\r\n  color: #555;\r\n  word-break: break-word;\r\n`\r\n\r\nfunction AboutPage() {\r\n  return (\r\n    <Root>\r\n      <AboutContainer>\r\n        <AboutHeader>\r\n          <AboutTitle>\r\n            About\r\n          </AboutTitle>\r\n        </AboutHeader>\r\n        <AboutContent>\r\n          Lidemy React homework - blog\r\n        </AboutContent>\r\n      </AboutContainer>\r\n    </Root>\r\n  );\r\n}\r\n\r\nexport default AboutPage;\r\n","/* eslint-disable react/react-in-jsx-scope */\r\n/* eslint-disable react/jsx-filename-extension */\r\n/* eslint-disable import/no-unresolved */\r\nimport { useState, useEffect } from 'react';\r\nimport styled from 'styled-components';\r\n\r\nimport {\r\n  HashRouter as Router, Switch, Route,\r\n} from 'react-router-dom';\r\nimport Header from '../Header';\r\nimport HomePage from '../../pages/HomePage';\r\nimport RegisterPage from '../../pages/RegisterPage';\r\nimport LoginPage from '../../pages/LoginPage';\r\nimport PostPage from '../../pages/PostPage';\r\nimport NewPostPage from '../../pages/NewPostPage';\r\nimport AboutPage from '../../pages/AboutPage';\r\n\r\n\r\nimport { AuthContext } from '../../contexts';\r\nimport { getMe } from '../../WebAPI';\r\nimport { getAuthToken } from '../../utils';\r\n\r\nconst Root = styled.div`\r\n  padding-top: 64px;\r\n`;\r\n\r\nfunction App() {\r\n  const [user, setUser] = useState(null);\r\n  const [isGettingUser, setIsGettingUser] = useState(true);\r\n\r\n  useEffect(() => {\r\n    if (getAuthToken()) {\r\n      getMe().then((response) => {\r\n        if (response.ok) {\r\n          setUser(response.data);\r\n          setIsGettingUser(false);\r\n        }\r\n      });\r\n    } else {\r\n      setIsGettingUser(false);\r\n    }\r\n  }, []);\r\n\r\n\r\n  return (\r\n    <AuthContext.Provider value={{ user, setUser, isGettingUser }}>\r\n      <Root>\r\n        <Router>\r\n          <Header />\r\n          <Switch>\r\n            {/* 加上 exact 表示完全匹配 */}\r\n            <Route exact path=\"/\">\r\n              <HomePage />\r\n            </Route>\r\n            <Route path=\"/register\">\r\n              <RegisterPage />\r\n            </Route>\r\n            <Route path=\"/login\">\r\n              <LoginPage />\r\n            </Route>\r\n            <Route path=\"/posts/:id\">\r\n              <PostPage />\r\n            </Route>\r\n            <Route path=\"/new-post\">\r\n              <NewPostPage />\r\n            </Route>\r\n            <Route path=\"/about\">\r\n              <AboutPage />\r\n            </Route>\r\n          </Switch>\r\n\r\n        </Router>\r\n      </Root>\r\n    </AuthContext.Provider>\r\n  );\r\n}\r\n\r\n\r\nexport default App;\r\n","/* eslint-disable react/jsx-filename-extension */\r\n/* eslint-disable import/no-unresolved */\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './components/App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root'),\r\n);\r\n"],"sourceRoot":""}